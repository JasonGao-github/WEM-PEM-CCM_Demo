<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wemccm.project.dao.ProjectDao">

<!-- 		SELECT cc.*,co.userId,p.statues,p.createDate,p.version
		FROM project as p
		LEFT JOIN currentoccupy as co
		ON p.id=co.projectId
		
		LEFT JOIN customercontribution as cc
		ON p.id=cc.projectId
		
		WHERE p.id=#{id} -->
		
	<select id="selectPage"
		
		resultType="com.wemccm.common.page.FindPageRequestDto"
		parameterType="com.wemccm.common.page.FindPageRequestDtoPojo">
		SELECT cc.*,co.userId,p.statues,p.createDate,p.version
		FROM project as p
		LEFT JOIN currentoccupy as co
		ON p.id=co.projectId
		
		LEFT JOIN customercontribution as cc
		ON p.id=cc.projectId
		<where>
			<if test="jemenaWBS!=null and jemenaWBS!=''">
				cc.jemenaWBS = #{jemenaWBS}
			</if>
			<if test="projectTitle!=null and projectTitle!=''">
				and cc.projectTitle = #{projectTitle}
			</if>
			<if test="projectTypeId!=null and projectTypeId!=''">
				and cc.projectTypeId = #{projectTypeId}
			</if>
			<if test="jemenaSapPmOrder!=null and jemenaSapPmOrder!=''">
				and cc.jemenaSapPmOrder = #{jemenaSapPmOrder}
			</if>
			<if test="supplyAddress!=null and supplyAddress!=''">
				and cc.supplyAddress = #{supplyAddress}
			</if>
			<if test="zinfraWBS!=null and zinfraWBS!=''">
				and cc.zinfraWBS= #{zinfraWBS}
			</if>
			<if test="inquiryNumber!=null and inquiryNumber!=''">
				and cc.inquiryNumber = #{inquiryNumber}
			</if>
		</where>
	</select>
	
	
	<select id="addProject" 
	
		parameterType="com.wemccm.common.pojo.projectPojo">

		INSERT INTO customercontribution (projectId, projectTitle,jemenaWBS,inquiryNumber,jemenaSapPmOrder,zinfraWBS,projectTypeId,supplyAddress) 
		VALUES (#{id},#{projectTitle},#{jemenaWBS},#{inquiryNumber},#{jemenaSapPmOrder},#{zinfraWBS},#{projectTypeId},#{supplyAddress})
		
		INSERT INTO project (id, statues,createDate,version) 
		VALUES (#{id},#{statues},#{createDate},#{version}) 
		
		
		
		
	</select>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</mapper>